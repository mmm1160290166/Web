<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TreeTable</title>
    <!--css引入  -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/nifty.min.css">
    <link rel="stylesheet" href="css/demo/nifty-demo-icons.min.css">
    <link rel="stylesheet" href="css/demo/nifty-demo.min.css">
    <link rel="stylesheet" href="plugins/themify-icons/themify-icons.css">
    <link rel="stylesheet" href="plugins/jquery-treetable/css/jquery.treetable.css">
    <link rel="stylesheet" href="plugins/jquery-treetable/css/jquery.treetable.theme.default.css">
    <link rel="stylesheet" href="css/nifty.p8.css">
    <link rel="stylesheet" href="css/genaral.css">
    <!--js引入  -->
    <script src="js/jquery-2.2.4.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/nifty.min.js"></script>
    <script src="js/demo/nifty-demo.min.js"></script>
    <script src="plugins/jquery-treetable/jquery.treetable.js"></script>
</head>
<body>
<div id="page-content" class="fl-xml ">
    <div class="panel panel-xml fl-xml hei-xml">
        <div class="z-xml">
            <div class="header-xml">
                <button class="panl-xml develop-xml">
                    <i class="ti-view-list"></i>
                    <span>全部展开</span>
                </button>
                <button class="fr-xml retract-xml">
                    <i class="ti-layout-column3"></i>
                    <span>全部收起</span>
                </button>
            </div>
            <div class="search-xml">
                <div class="searchbox">
                    <div class="input-group custom-search-form">
                        <input type="text" id="searchValue" class="form-control" placeholder="Search..">
                        <span class="input-group-btn">
                        <button  id="searchButton" class="text-muted" type="button"><i class="demo-pli-magnifi-glass"></i></button>
                    </span>
                    </div>
                </div>
            </div>
            <div class="height-xml"  id="searchContent">
                    <table id="xml" class="treetable-xml">
                        <tbody>
                            <tr data-tt-id="1-1" class="first-xml">
                                <td class="first">
                                    <a href="javascript:;">公司点滴</a>
                                </td>
                            </tr>
                            <tr data-tt-id="2-1" data-tt-parent-id="1-1" class="second-xml">
                                <td class="second">
                                    <a href="javascript:;">历史发展</a>
                                </td>
                            </tr>

                            <tr data-tt-id="2-1-1" data-tt-parent-id="2-1" class="third-xml">
                                <td class="third">
                                    <a href="javascript:;">公司介绍</a>
                                </td>
                            </tr>
                            <tr data-tt-id="2-1-2" data-tt-parent-id="2-1" class="third-xml">
                                <td class="third">
                                    <a href="javascript:;">大事件</a>
                                </td>
                            </tr>
                            <tr data-tt-id="2-1-3" data-tt-parent-id="2-1" class="third-xml">
                                <td class="third">
                                    <a href="javascript:;">规划蓝图</a>
                                </td>
                            </tr>
                            <tr data-tt-id="2-2" data-tt-parent-id="1-1" class="second-xml">
                                <td class="second">
                                    <a href="javascript:;">企业文化</a>
                                </td>
                            </tr>
                            <tr data-tt-id="2-2-1" data-tt-parent-id="2-2" class="third-xml">
                                <td class="third">
                                    <a href="javascript:;">企业理念</a>
                                </td>
                            </tr>
                            <tr data-tt-id="2-2-1-1" data-tt-parent-id="2-2-1" class="third-xml">
                                <td class="third">
                                    <a href="javascript:;">企业理念</a>
                                </td>
                            </tr>
                            <tr data-tt-id="2-2-2" data-tt-parent-id="2-2" class="third-xml">
                                <td class="third">
                                    <a href="javascript:;">组织结构</a>
                                </td>
                            </tr>
                            <tr data-tt-id="3-1" class="first-xml">
                                <td class="first">
                                    <a href="javascript:;">公司制度</a>
                                </td>
                            </tr>
                            <tr data-tt-id="3-1-1" data-tt-parent-id="3-1" class="second-xml">
                                <td class="second">
                                    <a href="javascript:;">管理制度</a>
                                </td>
                            </tr>
                            <tr data-tt-id="3-1-2" data-tt-parent-id="3-1" class="second-xml">
                                <td class="second">
                                    <a href="javascript:;">工作职能</a>
                                </td>
                            </tr>
                            <tr data-tt-id="4-1" class="first-xml">
                                <td class="first">
                                    <a href="javascript:;">工作流程</a>
                                </td>
                            </tr>
                            <tr data-tt-id="4-1" class="first-xml">
                                <td class="first">
                                    <a href="javascript:;">新闻</a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
            </div>
        </div>
        <div class="y-xml">
            <div class="panel-heading">
                <h3 class="panel-title">Basic Data Tables with responsive plugin</h3>
            </div>
            <div class="html-xml">
                <div class="btn-group">
                    <button id="btn_add" type="button" class="btn btn-default">
                        <span class="ti-plus" aria-hidden="true"></span>
                        <div style="display:inline-block;margin-left:2px">新增表</div>
                    </button>
                    <div class="btn-group">
                        <button class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                            <span class="ti-menu-alt"></span>
                        </button>
                        <ul class="dropdown-menu">
                            <li><a href="#">Action</a></li>
                            <li><a href="#">Another action</a></li>
                            <li><a href="#">Something else here</a></li>
                            <li class="divider"></li>
                            <li><a href="#">Separated link</a></li>
                        </ul>
                    </div>
                </div>
                <div class="rig-xml">
                    <div class="pull-right search"><input class="form-control" type="text" placeholder="搜索"></div>
                    <button class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                        <span class="glyphicon demo-pli-repeat-2"></span>
                    </button>
                    <div class="keep-open btn-group" title="列">
                        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"
                                aria-expanded="true"><i class="glyphicon demo-pli-check"></i> <span
                                class="caret"></span>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-right" role="menu">
                            <li>
                                <label><input type="checkbox"> ID</label>
                            </li>
                            <li>
                                <label><input type="checkbox"> 程序代码</label>
                            </li>
                            <li>
                                <label><input type="checkbox"> 表名</label>
                            </li>
                            <li>
                                <label><input type="checkbox"> 中文名</label>
                            </li>
                            <li>
                                <label><input type="checkbox"> 主/从表</label>
                            </li>
                            <li>
                                <label><input type="checkbox"> 描述</label>
                            </li>
                            <li>
                                <label><input type="checkbox"> 操作</label>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="pad-xml">
                <table class="table-xml table table-bordered border-xml" id="demo-foo-addrow">
                    <thead>
                    <tr>
                        <th class="wid10-xml center-xml">
                            <div class="th-inner">程序代码</div>
                            <div class="fht-cell"></div>
                        </th>
                        <th class="wid15-xml center-xml">
                            <div class="th-inner ">表名</div>
                            <div class="fht-cell"></div>
                        </th>
                        <th class="wid15-xml center-xml">
                            <div class="th-inner ">中文名</div>
                            <div class="fht-cell"></div>
                        </th>
                        <th class="wid10-xml center-xml">
                            <div class="th-inner ">主/从表</div>
                            <div class="fht-cell"></div>
                        </th>
                        <th class="wid20-xml center-xml">
                            <div class="th-inner ">描述</div>
                            <div class="fht-cell"></div>
                        </th>
                        <th class="wid10-xml center-xml">
                            <div class="th-inner">操作</div>
                            <div class="fht-cell"></div>
                        </th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td class="center-xml">sys</td>
                        <td class="center-xml">SYSMD</td>
                        <td class="center-xml">数据源分类</td>
                        <td class="center-xml">主表</td>
                        <td class="center-xml">-</td>
                        <td class="center-xml">
                            <button class="ti-more-alt trans-xml"></button>
                        </td>
                    </tr>
                    <tr>
                        <td class="center-xml">sys</td>
                        <td class="center-xml">CKTESTA</td>
                        <td class="center-xml">测试表单A</td>
                        <td class="center-xml">从表</td>
                        <td class="center-xml">-</td>
                        <td class="center-xml">
                            <button class="ti-more-alt trans-xml"></button>
                        </td>
                    </tr>
                    <tr>
                        <td class="center-xml">sys</td>
                        <td class="center-xml">CKTESTB</td>
                        <td class="center-xml">测试表单B</td>
                        <td class="center-xml">从表</td>
                        <td class="center-xml">-</td>
                        <td class="center-xml">
                            <button class="ti-more-alt trans-xml"></button>
                        </td>
                    </tr>
                    <tr>
                        <td class="center-xml">2010101</td>
                        <td class="center-xml">BASMA</td>
                        <td class="center-xml">国家设置</td>
                        <td class="center-xml">主表</td>
                        <td class="center-xml">-</td>
                        <td class="center-xml">
                            <button class="ti-more-alt trans-xml"></button>
                        </td>
                    </tr>
                    <tr>
                        <td class="center-xml">sys</td>
                        <td class="center-xml">testTB</td>
                        <td class="center-xml">测试表</td>
                        <td class="center-xml">从表</td>
                        <td class="center-xml">-</td>
                        <td class="center-xml">
                            <button class="ti-more-alt trans-xml"></button>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div class="pad-xml">
                <span class="pagination-info">显示第 1 到第 5 条记录，总共 5 条记录</span>
            </div>
        </div>
    </div>
</div>
</body>
<script>
    $(function () {
//        jquery treetable 初始化
        $('#xml').treetable({
            expandable: true,
        });
//        获取window高度,给到z-xml盒子边框以及滚动条
        var wHeiht = $(window).height() - 91;
        if ($('.z-xml').height() > $('.y-xml').height()) {
            $('.z-xml').css({"borderRight": "1px solid #dddddd"});
        } else {
            $('.y-xml').css({"borderLeft": "1px solid #dddddd"});
        }
        if ($('.z-xml').height() > wHeiht) {
            $('.height-xml').css({
                "overflowY": "auto",
                "height": wHeiht + "px"
            });
        }
        $('.indenter').on('click', function () {
            if ($('.z-xml').height() > $('.y-xml').height()) {
                $('.z-xml').css({"borderRight": "1px solid #dddddd"});
                $('.y-xml').css({"borderLeft": "none"});
            } else {
                $('.y-xml').css({"borderLeft": "1px solid #dddddd"});
                $('.z-xml').css({"borderRight": "none"});
            }
            if ($('.z-xml').height() > wHeiht) {
                $('.height-xml').css({
                    "overflowY": "auto",
                    "height": wHeiht + "px"
                });
            }
        })
//        全部展开与全部收起按钮事件
//        全部展开
        $('.develop-xml').on('click', function () {
            $('#xml').treetable('expandAll');

        })
//        全部收起
        $('.retract-xml').on('click', function () {
            $('#xml').treetable('collapseAll');
        })
        //        搜索框高亮显示
        $('#searchButton').on('click', function () {
            var val = $('#searchValue').val();
            if (val.length > 0) {
                var trList = $("#xml tbody").children("tr");
                for (var i = 0; i < trList.length; i++) {
                    var tdArr = trList.eq(i).find("td");
                    var id_val = trList.eq(i).attr("data-tt-id");
                    var a_List = tdArr.eq(0).find('a').text();
                    var index = a_List.indexOf(val);
                    if (index >= 0) {
                        tdArr.css("backgroundColor", "#e8e8e8");
                        tdArr.find("a").css("color", "#1f1e22");
                        tdArr.find("a").css("font-weight", "bold");
                        $('#xml').treetable('reveal', id_val);
                    } else {
                        tdArr.css("backgroundColor", "");
                        tdArr.find("a").css("color", "");
                        tdArr.find("a").css("font-weight", "");
                        $('#xml').treetable('collapseNode', id_val);
                    }
                }
            }
        })

    })

</script>
</html>